<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qcycp.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="筆記本">
<meta property="og:url" content="https:&#x2F;&#x2F;qcycp.github.io&#x2F;page&#x2F;14&#x2F;index.html">
<meta property="og:site_name" content="筆記本">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://qcycp.github.io/page/14/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-tw'
  };
</script>

  <title>筆記本</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">筆記本</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>連結</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/8931cf79/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/8931cf79/" class="post-title-link" itemprop="url">GitBook文件轉換成pdf</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-12-02 09:58:20" itemprop="dateCreated datePublished" datetime="2019-12-02T09:58:20+08:00">2019-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/GitBook/" itemprop="url" rel="index"><span itemprop="name">GitBook</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install npm</span><br><span class="line">sudo npm install -g gitbook-cli</span><br><span class="line">sudo ln -s /usr/bin/nodejs /usr/bin/node</span><br><span class="line">sudo apt-get install calibre</span><br><span class="line">sudo npm install gitbook-pdf -g</span><br><span class="line">gitbook pdf .</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/d585e6aa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/d585e6aa/" class="post-title-link" itemprop="url">pyinstaller</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-25 17:29:00" itemprop="dateCreated datePublished" datetime="2019-11-25T17:29:00+08:00">2019-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install pyinstaller</span><br></pre></td></tr></table></figure>

<h1 id="生成exe檔"><a href="#生成exe檔" class="headerlink" title="生成exe檔"></a>生成exe檔</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyinstaller &lt;config&gt; main.py</span><br></pre></td></tr></table></figure>

<h1 id="指定spec文件"><a href="#指定spec文件" class="headerlink" title="指定spec文件"></a>指定spec文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyinstaller main.spec main.py</span><br></pre></td></tr></table></figure>

<h1 id="config"><a href="#config" class="headerlink" title="config"></a>config</h1><p><code>--noconsole</code>: 執行exe檔時，不顯示console視窗<br><code>--onefile</code>: 打包成單一個exe檔案<br><code>--icon</code>: 指定exe檔案的icon</p>
<h1 id="spec文件"><a href="#spec文件" class="headerlink" title="spec文件"></a>spec文件</h1><ol>
<li>控制pyinstall打包，以及程式run time執行時的配置</li>
<li>在執行pyinstall會根據指令的config自動建立，也可以透過以下指令單獨生成spec檔案<br>pyi-makespec <config> main.py</config></li>
<li>當專案中需要使用到額外的資源檔案時，必須手動編輯spec文件</li>
</ol>
<h1 id="steps-for-generate-exe-file"><a href="#steps-for-generate-exe-file" class="headerlink" title="steps for generate exe file:"></a>steps for generate exe file:</h1><ol>
<li><code>pyi-makespec --onefile --noconsole --icon D:\\FaceDetection\\data\fd.ico main.py</code></li>
<li>edit main.spec，添加static file to datas<br><code>a = Analysis(..., datas=[(&#39;D:\\FaceDetection\\data&#39;, &#39;data&#39;)], ...)</code><br>Note: datas中的資料為一tuple值，第一個欄位為檔案在系統中的路徑，第二個欄位為在打包環境中的路徑</li>
<li><code>pyinstaller main.spec main.py</code></li>
</ol>
<h1 id="sample-for-spec文件"><a href="#sample-for-spec文件" class="headerlink" title="sample for spec文件"></a>sample for spec文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: python ; coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">block_cipher = None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Analysis([<span class="string">'main.py'</span>],</span><br><span class="line">             pathex=[<span class="string">'D:\\FaceDetection'</span>],</span><br><span class="line">             binaries=[],</span><br><span class="line">             datas=[(<span class="string">'D:\\FaceDetection\\data'</span>, <span class="string">'data'</span>)],</span><br><span class="line">             hiddenimports=[],</span><br><span class="line">             hookspath=[],</span><br><span class="line">             runtime_hooks=[],</span><br><span class="line">             excludes=[],</span><br><span class="line">             win_no_prefer_redirects=False,</span><br><span class="line">             win_private_assemblies=False,</span><br><span class="line">             cipher=block_cipher,</span><br><span class="line">             noarchive=False)</span><br><span class="line">pyz = PYZ(a.pure, a.zipped_data,</span><br><span class="line">             cipher=block_cipher)</span><br><span class="line">exe = EXE(pyz,</span><br><span class="line">          a.scripts,</span><br><span class="line">          a.binaries,</span><br><span class="line">          a.zipfiles,</span><br><span class="line">          a.datas,</span><br><span class="line">          [],</span><br><span class="line">          name=<span class="string">'main'</span>,</span><br><span class="line">          debug=False,</span><br><span class="line">          bootloader_ignore_signals=False,</span><br><span class="line">          strip=False,</span><br><span class="line">          upx=True,</span><br><span class="line">          upx_exclude=[],</span><br><span class="line">          runtime_tmpdir=None,</span><br><span class="line">          console=False , icon=<span class="string">'D:\\FaceDetection\\data\\fd.ico'</span>)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/410ebdbd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/410ebdbd/" class="post-title-link" itemprop="url">Deploy a Docker registry server</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-25 17:19:29" itemprop="dateCreated datePublished" datetime="2019-11-25T17:19:29+08:00">2019-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="pull-registry-image"><a href="#pull-registry-image" class="headerlink" title="pull registry image"></a>pull registry image</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  registry:</span><br><span class="line">    restart: always</span><br><span class="line">    image: registry:2</span><br><span class="line">    container_name: registry</span><br><span class="line">    ports:</span><br><span class="line">      - 5000:5000</span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/timezone:/etc/timezone:ro</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">      - /opt/docker-software/registry:/var/lib/registry</span><br><span class="line">    environment:</span><br><span class="line">      - REGISTRY_STORAGE_DELETE_ENABLED=<span class="string">"true"</span></span><br></pre></td></tr></table></figure>

<h1 id="push-pull-images"><a href="#push-pull-images" class="headerlink" title="push/pull images"></a>push/pull images</h1><p>image push前必須先tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker tag myimage host:5000/myimage:1.0.0</span><br><span class="line">$ docker push host:5000/myimage:1.0.0</span><br><span class="line">$ docker image remove host:5000/myimage:1.0.0 <span class="comment"># remove the locally-cached host:5000/myimage:1.0.0</span></span><br><span class="line">$ docker pull host:5000/myimage:1.0.0</span><br></pre></td></tr></table></figure>

<h1 id="trouble-shooting"><a href="#trouble-shooting" class="headerlink" title="trouble shooting"></a>trouble shooting</h1><p>error message when push images to registry server</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The push refers to repository [host:5000/myimage]</span><br><span class="line">Get https://host:5000/v2/: http: server gave HTTP response to HTTPS client</span><br></pre></td></tr></table></figure>
<ul>
<li>Insecure Registries<br>If this registry is insecure and doesn’t hide behing SSL certificates then you will need to configure your Docker client to allow pushing to this insecure registry.<br>Edit or you may even need to create the following file on your Linux server:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/docker/daemon.json</span><br></pre></td></tr></table></figure>
And save the following content:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"insecure-registries"</span>: [<span class="string">"host:5000"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
You will need to restart your Docker service before these changes will take effect.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service docker restart</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="get-image-list-from-docker-registry"><a href="#get-image-list-from-docker-registry" class="headerlink" title="get image list from docker registry"></a>get image list from docker registry</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X GET http://host:5000/v2/_catalog | jq</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"repositories"</span>: [</span><br><span class="line">    <span class="string">"myimage"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ curl -X GET http://host:5000/v2/&lt;myimage&gt;/tags/list | jq</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"myimage"</span>,</span><br><span class="line">  <span class="string">"tags"</span>: [</span><br><span class="line">    <span class="string">"1.0.0"</span>,</span><br><span class="line">    <span class="string">"1.1.0"</span>,</span><br><span class="line">    <span class="string">"1.2.0"</span>,</span><br><span class="line">    <span class="string">"1.3.0"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="delete-images-in-registry-server"><a href="#delete-images-in-registry-server" class="headerlink" title="delete images in registry server"></a>delete images in registry server</h1><ol>
<li>delete using registry REST API</li>
</ol>
<ul>
<li>REGISTRY_STORAGE_DELETE_ENABLED必須設定為true，DELETE API才支援</li>
<li>DELETE API僅會刪除link資料，影響API查詢的結果，但實際上的layer data還是存在，必須再執行garbage-collect才能刪除</li>
<li>一定要設定header的Accept為application/vnd.docker.distribution.manifest.v2+json，收到的Content才會是對的<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ curl -I -H <span class="string">"Accept: application/vnd.docker.distribution.manifest.v2+json"</span> http://host:5000/v2/&lt;myimage&gt;/manifests/&lt;tag&gt;</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Length: 1362</span><br><span class="line">Content-Type: application/vnd.docker.distribution.manifest.v2+json</span><br><span class="line">Docker-Content-Digest: sha256:7185dc9a13a5178f5d33654ebe5cf5982e51c9bfff0b1e227e3735dffffe7226</span><br><span class="line">Docker-Distribution-Api-Version: registry/2.0</span><br><span class="line">Etag: <span class="string">"sha256:7185dc9a13a5178f5d33654ebe5cf5982e51c9bfff0b1e227e3735dffffe7226"</span></span><br><span class="line">X-Content-Type-Options: nosniff</span><br><span class="line">Date: Tue, 26 Nov 2019 13:47:34 GMT</span><br><span class="line"></span><br><span class="line">$ curl -v -X DELETE http://host:5000/v2/&lt;myimage&gt;/manifests/sha256:7185dc9a13a5178f5d33654ebe5cf5982e51c9bfff0b1e227e3735dffffe7226</span><br><span class="line">$ docker <span class="built_in">exec</span> -it registry registry garbage-collect /etc/docker/registry/config.yml</span><br><span class="line">$ docker restart registry</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li>delete in the file system<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it registry sh</span><br><span class="line">/ <span class="comment"># export NAME="&lt;myimage&gt;"</span></span><br><span class="line">/ <span class="comment"># export VERSION="&lt;tag&gt;"</span></span><br><span class="line">/ <span class="comment"># cd /var/lib/registry/docker/registry/v2</span></span><br><span class="line">/var/lib/registry/docker/registry/v2 <span class="comment"># find . | grep `ls ./repositories/$NAME/_manifests/tags/$VERSION/index/sha256`| xargs rm -rf $1</span></span><br><span class="line">/var/lib/registry/docker/registry/v2 <span class="comment"># rm -rf ./repositories/$NAME/_manifests/tags/$VERSION</span></span><br><span class="line">/var/lib/registry/docker/registry/v2 <span class="comment"># registry garbage-collect /etc/docker/registry/config.yml</span></span><br><span class="line">/ <span class="comment"># exit</span></span><br><span class="line">$ docker restart registry</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="Cleaning-up-the-Registry"><a href="#Cleaning-up-the-Registry" class="headerlink" title="Cleaning up the Registry"></a>Cleaning up the Registry</h1><p>When you delete an image from the registry, this won’t actually remove the blob layers as you might expect. For this reason you have to run this command on your docker registry host to perform garbage collection:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it registry registry garbage-collect /etc/docker/registry/config.yml</span><br></pre></td></tr></table></figure>
<p>And if you wanted to make a cron job that runs every 30 mins:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0,30 * * * * docker <span class="built_in">exec</span> -it registry registry garbage-collect /etc/docker/registry/config.yml &gt;&gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<h1 id="GUI-tool-via-docker-image"><a href="#GUI-tool-via-docker-image" class="headerlink" title="GUI tool via docker image"></a>GUI tool via docker image</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 8080:8080 --name registry-web -e REGISTRY_URL=http://host:5000/v2 hyper/docker-registry-web</span><br></pre></td></tr></table></figure>
<ul>
<li>by docker-compose.yml<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  registry-web:</span><br><span class="line">    restart: always</span><br><span class="line">    image: hyper/docker-registry-web</span><br><span class="line">    container_name: registry-web</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:8080</span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/timezone:/etc/timezone:ro</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">    environment:</span><br><span class="line">      - REGISTRY_URL=http://host:5000/v2</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/b4ce8caa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/b4ce8caa/" class="post-title-link" itemprop="url">設置ubuntu環境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-19 11:33:09" itemprop="dateCreated datePublished" datetime="2019-11-19T11:33:09+08:00">2019-11-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><p>Ubuntu 16.04.1 Server (64-bit)<br><a href="http://old-releases.ubuntu.com/releases/16.04.1/ubuntu-16.04.1-server-amd64.iso" target="_blank" rel="noopener">http://old-releases.ubuntu.com/releases/16.04.1/ubuntu-16.04.1-server-amd64.iso</a></p>
</li>
<li><p>Ubuntu 16.04.6 Server (64-bit)<br><a href="http://releases.ubuntu.com/16.04/ubuntu-16.04.6-server-amd64.iso" target="_blank" rel="noopener">http://releases.ubuntu.com/16.04/ubuntu-16.04.6-server-amd64.iso</a></p>
</li>
</ul>
<h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h1><ol>
<li>如果VM的網路卡沒有「僅限主機」介面卡可以用，必須先手動建立<br><code>VirtualBox - 全域工具 - 主機網路管理員</code><br>建立新的network interface<br>可以手動設定ip, f.g. ip: 192.168.199.1, mask: 255.255.255.0</li>
<li>配置網路<br>a. 介面卡1: NAT<br>主要是建立VM的對外網路<br>b. 介面卡2: 「僅限主機」介面卡<br>主要是建立VM跟Windows之間的，可以進行溝通的網路</li>
</ol>
<h1 id="Environment-Setup"><a href="#Environment-Setup" class="headerlink" title="Environment Setup"></a>Environment Setup</h1><ol>
<li>General settings</li>
<li>Python</li>
<li>Docker</li>
</ol>
<h3 id="1-General-Settings"><a href="#1-General-Settings" class="headerlink" title="1. General Settings"></a>1. General Settings</h3><ul>
<li><p>Check the network interface of enp0s8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ ifconfig -a</span><br></pre></td></tr></table></figure>
<p><img src="/posts/b4ce8caa/network01.jpg" alt></p>
</li>
<li><p>If there is no ip address, set dhcp for enp0s8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo vim /etc/network/interfaces</span><br></pre></td></tr></table></figure></li>
<li><p>Add following commands at the bottom</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auto enp0s8</span><br><span class="line">iface enp0s8 inet dhcp</span><br></pre></td></tr></table></figure></li>
<li><p>Or, you can set static ip address</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">auto enp0s8</span><br><span class="line">iface enp0s8 inet static</span><br><span class="line">address 192.168.56.3</span><br></pre></td></tr></table></figure></li>
<li><p>Restart networking and check enp0s8 again</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo service networking restart</span><br><span class="line">user@ubuntu:~$ ifconfig -a</span><br></pre></td></tr></table></figure>
<p><img src="/posts/b4ce8caa/network02.jpg" alt></p>
</li>
<li><p>Install ssh and then you can connect to vm via terminal tools</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo apt-get update</span><br><span class="line">user@ubuntu:~$ sudo apt-get install ssh</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-Python"><a href="#2-Python" class="headerlink" title="2. Python"></a>2. Python</h3><ul>
<li><p>Install python3.6</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo add-apt-repository ppa:deadsnakes/ppa</span><br><span class="line">user@ubuntu:~$ sudo apt-get update</span><br><span class="line">user@ubuntu:~$ sudo apt-get install python3.6</span><br></pre></td></tr></table></figure>
</li>
<li><p>Create update-alternatives list for python</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.5 1</span><br><span class="line">update-alternatives: using /usr/bin/python3.5 to provide /usr/bin/python (python) <span class="keyword">in</span> auto mode</span><br><span class="line">user@ubuntu:~$ sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2</span><br><span class="line">update-alternatives: using /usr/bin/python3.6 to provide /usr/bin/python (python) <span class="keyword">in</span> auto mode</span><br><span class="line"></span><br><span class="line">user@ubuntu:~$ update-alternatives --list python</span><br><span class="line">/usr/bin/python3.5</span><br><span class="line">/usr/bin/python3.6</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set default command of python</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo update-alternatives --config python</span><br><span class="line">There are 2 choices <span class="keyword">for</span> the alternative python (providing /usr/bin/python).</span><br><span class="line"></span><br><span class="line">  Selection    Path                Priority   Status</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">* 0            /usr/bin/python3.6   2         auto mode</span><br><span class="line">  1            /usr/bin/python3.5   1         manual mode</span><br><span class="line">  2            /usr/bin/python3.6   2         manual mode</span><br><span class="line"></span><br><span class="line">Press &lt;enter&gt; to keep the current choice[*], or <span class="built_in">type</span> selection number: 2</span><br><span class="line"></span><br><span class="line">user@ubuntu:~$ python -V</span><br><span class="line">Python 3.6.9</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install pip for python3.6</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ curl https://bootstrap.pypa.io/get-pip.py | sudo python3.6</span><br></pre></td></tr></table></figure></li>
<li><p>Install virtualenv or virtualenvwrapper<br>There are two types of environment control for python.<br><code>virtualenv</code>: isolated for each project<br><code>virtualenvwrapper</code>: you can share environment settings between different projects</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ pip install virtualenv --user</span><br><span class="line">user@ubuntu:~$ pip install virtualenvwrapper --user</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install related packages</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ sudo apt-get install make</span><br><span class="line">user@ubuntu:~$ sudo apt-get install gcc</span><br><span class="line">user@ubuntu:~$ sudo apt-get install libssl-dev</span><br><span class="line">user@ubuntu:~$ sudo apt-get install python3.6-dev</span><br><span class="line">user@ubuntu:~$ sudo apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-Docker"><a href="#3-Docker" class="headerlink" title="3. Docker"></a>3. Docker</h3><ul>
<li><p>Install docker<br>You can install docker online or via deb files</p>
</li>
<li><p>Online install</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ curl -sSL https://get.docker.com/ | sh</span><br><span class="line"><span class="comment"># Executing docker install script, commit: f45d7c11389849ff46a6b4d94e0dd1ffebca32c1</span></span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c curl -fsSL <span class="string">"https://download.docker.com/linux/ubuntu/gpg"</span> | apt-key add -qq - &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c <span class="built_in">echo</span> <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable"</span> &gt; /etc/apt/sources.list.d/docker.list</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ [ -n  ]</span><br><span class="line">+ sudo -E sh -c apt-get install -y -qq --no-install-recommends docker-ce &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.5</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.12.12</span><br><span class="line"> Git commit:        633a0ea838</span><br><span class="line"> Built:             Wed Nov 13 07:50:12 2019</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Experimental:      <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.5</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.12.12</span><br><span class="line">  Git commit:       633a0ea838</span><br><span class="line">  Built:            Wed Nov 13 07:48:43 2019</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">false</span></span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.10</span><br><span class="line">  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc8+dev</span><br><span class="line">  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br><span class="line">If you would like to use Docker as a non-root user, you should now consider</span><br><span class="line">adding your user to the <span class="string">"docker"</span> group with something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker user</span><br><span class="line"></span><br><span class="line">Remember that you will have to <span class="built_in">log</span> out and back <span class="keyword">in</span> <span class="keyword">for</span> this to take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding a user to the <span class="string">"docker"</span> group will grant the ability to run</span><br><span class="line">         containers <span class="built_in">which</span> can be used to obtain root privileges on the</span><br><span class="line">         docker host.</span><br><span class="line">         Refer to https://docs.docker.com/engine/security/security/<span class="comment">#docker-daemon-attack-surface</span></span><br><span class="line">         <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure>
</li>
<li><p>deb file<br><a href="https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/" target="_blank" rel="noopener">https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">user@ubuntu:~$ wget --no-check-certificate https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/containerd.io_1.2.6-3_amd64.deb</span><br><span class="line">user@ubuntu:~$ wget --no-check-certificate https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/docker-ce-cli_19.03.4~3-0~ubuntu-xenial_amd64.deb</span><br><span class="line">user@ubuntu:~$ wget --no-check-certificate https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/docker-ce_19.03.4~3-0~ubuntu-xenial_amd64.deb</span><br><span class="line">user@ubuntu:~$ sudo dpkg -i containerd.io_1.2.6-3_amd64.deb</span><br><span class="line">user@ubuntu:~$ sudo dpkg -i docker-ce-cli_19.03.4~3-0~ubuntu-xenial_amd64.deb</span><br><span class="line">user@ubuntu:~$ sudo dpkg -i docker-ce_19.03.4~3-0~ubuntu-xenial_amd64.deb</span><br><span class="line">user@ubuntu:~$ docker --version</span><br><span class="line">Docker version 19.03.4, build 9013bf583a</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install docker-compose</p>
<h4 id="release-page"><a href="#release-page" class="headerlink" title="release page"></a>release page</h4><p><a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">https://github.com/docker/compose/releases</a></p>
</li>
</ul>
<h4 id="Install-docker-compose-1-22-0-on-ubuntu"><a href="#Install-docker-compose-1-22-0-on-ubuntu" class="headerlink" title="Install docker-compose (1.22.0) on ubuntu"></a>Install docker-compose (1.22.0) on ubuntu</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">$ curl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">$ chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">$ docker-compose --version</span><br><span class="line">docker-compose version 1.22.0, build f46880fe</span><br></pre></td></tr></table></figure>

<ul>
<li>Remove docker<ul>
<li>查看系統中有安裝多少跟docker有關的package<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dpkg -l | grep -i docker</span></span><br></pre></td></tr></table></figure></li>
<li>remove all packages about docker<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get purge -y docker-ce</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get autoremove -y --purge docker-ce</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get autoclean</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo rm -rf /var/lib/docker</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/6ca74c1e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/6ca74c1e/" class="post-title-link" itemprop="url">Markdown to HTML</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-14 21:12:56" itemprop="dateCreated datePublished" datetime="2019-11-14T21:12:56+08:00">2019-11-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/Sublime-Text-3/" itemprop="url" rel="index"><span itemprop="name">Sublime Text 3</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>在Sublime Text 3上，安裝MarkdownEditing</li>
</ol>
<ul>
<li>Preferences-&gt;Package Control<br><img src="/posts/6ca74c1e/image01.jpg" alt></li>
<li>輸入Install Package<br><img src="/posts/6ca74c1e/image02.jpg" alt></li>
<li>接著輸入MarkdownEditing，即可安裝完成<br><img src="/posts/6ca74c1e/image03.jpg" alt><br><img src="/posts/6ca74c1e/image04.jpg" alt></li>
</ul>
<ol start="2">
<li>轉換<br>在欲轉換的文件中，按下fn+F7，即可生成相對應的HTML檔案<br><img src="/posts/6ca74c1e/image05.jpg" alt></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/7de9a293/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/7de9a293/" class="post-title-link" itemprop="url">curl指令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-11 20:42:15" itemprop="dateCreated datePublished" datetime="2019-11-11T20:42:15+08:00">2019-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/curl/" itemprop="url" rel="index"><span itemprop="name">curl</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h1><ul>
<li><code>curl -X GET http://localhost:80/api/get</code></li>
<li><code>curl -X GET &quot;http://localhost:80/api/get?param1=abc&amp;param2=123&quot;</code></li>
</ul>
<h1 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h1><ul>
<li>form<ul>
<li><code>curl -X POST -d &quot;username=admin&amp;password=123456&quot; http://localhost:80/auth/login</code></li>
</ul>
</li>
<li>json<ul>
<li><code>curl -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{&quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;123456&quot;}&#39; http://localhost:80/auth/login</code></li>
</ul>
</li>
<li><code>curl -X POST -F &quot;image=@/home/user/test.jpg&quot; http://localhost:80/upload/image</code></li>
<li><code>curl -X POST -F &quot;image=@/home/user/test.jpg&quot; -F &quot;token=123456&quot; http://localhost:80/upload/image</code></li>
<li><code>curl -X POST -H &#39;Content-Type: application/json&#39; -d &#39;{&quot;username&quot;: &quot;test&quot;, &quot;password&quot;:&quot;123456&quot;, &quot;list_data&quot;:[1, 2]}&#39; http://localhost:80/api/post</code></li>
<li><code>curl -X POST --data-urlencode &#39;photo=&#39;&quot;$(base64 image.jpg)&quot;&#39;&#39; -d &quot;name=Nick&quot; http://localhost:80/upload/data</code></li>
<li><code>curl -X POST -H &quot;Content-Type: application/json&quot; -d @/home/user/data.json http://localhost:80/api/file/payload</code></li>
</ul>
<h1 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h1><ul>
<li><code>curl -X PUT -d &quot;data=test&quot; http://localhost:80/api/put</code></li>
</ul>
<h1 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h1><ul>
<li><code>curl -X DELETE http://localhost:80/api/delete</code></li>
</ul>
<h1 id="Download-file"><a href="#Download-file" class="headerlink" title="Download file"></a>Download file</h1><ul>
<li><code>curl -X GET &quot;http://localhost:80/api/download/data&quot; --output file.ext</code></li>
</ul>
<h1 id="Show-headers"><a href="#Show-headers" class="headerlink" title="Show headers"></a>Show headers</h1><ul>
<li><code>curl -i -X POST -d &#39;username=admin&amp;password=123456&#39; http://localhost:80/auth/login</code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.10.3 (Ubuntu)</span><br><span class="line">Date: Mon, 03 Jun 2019 02:43:54 GMT</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 1062</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Set-Cookie: session=3c8d8462-8590-435e-9227-485f96e4bec5; HttpOnly; Path=/</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"code"</span>: 0,</span><br><span class="line">  <span class="string">"data"</span>: <span class="string">"..."</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>Get further information from curl<ul>
<li>simple mode<br><code>$ curl -w &#39;Total: %{time_total}s\n&#39; -o /dev/null -s http://ip:port/api/</code></li>
<li>Create a new file, curl-format.txt, and paste in:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   time_namelookup:  %&#123;time_namelookup&#125;s\n</span><br><span class="line">      time_connect:  %&#123;time_connect&#125;s\n</span><br><span class="line">   time_appconnect:  %&#123;time_appconnect&#125;s\n</span><br><span class="line">  time_pretransfer:  %&#123;time_pretransfer&#125;s\n</span><br><span class="line">     time_redirect:  %&#123;time_redirect&#125;s\n</span><br><span class="line">time_starttransfer:  %&#123;time_starttransfer&#125;s\n</span><br><span class="line">                   ----------\n</span><br><span class="line">        time_total:  %&#123;time_total&#125;s\n</span><br></pre></td></tr></table></figure></li>
<li>Make a request<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl -w &quot;@curl-format.txt&quot; -o /dev/null -s &quot;http://ip:port/api/&quot;</span><br><span class="line">-w &quot;@curl-format.txt&quot; tells cURL to use our format file</span><br><span class="line">-o /dev/null redirects the output of the request to /dev/null</span><br><span class="line">-s tells cURL not to show a progress meter</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/39e057a1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/39e057a1/" class="post-title-link" itemprop="url">jsonify v.s. json.dumps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-11 17:22:22" itemprop="dateCreated datePublished" datetime="2019-11-11T17:22:22+08:00">2019-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>主要的差異在於response的Content-Type不同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.route('/test', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">"code"</span>: <span class="number">0</span>, <span class="string">"data"</span>: <span class="string">"test"</span>&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user@vm-docker:~$ curl -i -X GET http://localhost:5000/<span class="built_in">test</span></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.4.6 (Ubuntu)</span><br><span class="line">Date: Mon, 11 Nov 2019 09:14:21 GMT</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 180</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">"code"</span>:0,<span class="string">"data"</span>:<span class="string">"test"</span>&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.route('/test', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> json.dumps(&#123;<span class="string">"code"</span>: <span class="number">0</span>, <span class="string">"data"</span>: <span class="string">"test"</span>&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user@vm-docker:~$ curl -i -X GET http://localhost:5000/<span class="built_in">test</span></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.4.6 (Ubuntu)</span><br><span class="line">Date: Mon, 11 Nov 2019 09:17:14 GMT</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Content-Length: 198</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">"code"</span>:0,<span class="string">"data"</span>:<span class="string">"test"</span>&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/d436f53/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/d436f53/" class="post-title-link" itemprop="url">vim常用指令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-11 14:25:30" itemprop="dateCreated datePublished" datetime="2019-11-11T14:25:30+08:00">2019-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-08-12 09:58:53" itemprop="dateModified" datetime="2021-08-12T09:58:53+08:00">2021-08-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/vim/" itemprop="url" rel="index"><span itemprop="name">vim</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="config配置"><a href="#config配置" class="headerlink" title="config配置"></a>config配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">:set nu &quot; 顯示行數</span><br><span class="line">:set nonu &quot; 不顯示行數</span><br><span class="line"></span><br><span class="line">:set wrap &quot; 自動斷行</span><br><span class="line">:set nowrap &quot; 不自動斷行</span><br><span class="line"></span><br><span class="line">:set hlsearch &quot; highlight搜尋字串</span><br><span class="line"></span><br><span class="line">:set ic &quot; 搜尋字串不分大小寫</span><br><span class="line">:set noic &quot; 搜尋字串區分大小寫</span><br><span class="line"></span><br><span class="line">set cursorline</span><br><span class="line">set nowrap</span><br><span class="line">set laststatus=2</span><br><span class="line">set statusline=%4*%&lt;\%m%&lt;[%f\%r%h%w]%=%l,%v\ \ \ \ \ \ \ \ %p%%</span><br></pre></td></tr></table></figure>
<h1 id="monokai"><a href="#monokai" class="headerlink" title="monokai"></a>monokai</h1><p><a href="https://github.com/sickill/vim-monokai" target="_blank" rel="noopener">https://github.com/sickill/vim-monokai</a></p>
<ol>
<li>Put monokai.vim file in ~/.vim/colors/</li>
<li>edit .vimrc<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">syntax enable</span><br><span class="line">colorscheme monokai</span><br></pre></td></tr></table></figure>
<h1 id="用-user-打開了-root-權限的檔案，編輯之後無法儲存"><a href="#用-user-打開了-root-權限的檔案，編輯之後無法儲存" class="headerlink" title="用 user 打開了 root 權限的檔案，編輯之後無法儲存"></a>用 user 打開了 root 權限的檔案，編輯之後無法儲存</h1>用以下指令，即可儲存<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:w !sudo tee %</span><br></pre></td></tr></table></figure>
<h1 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h1></li>
</ol>
<ul>
<li>切換到編輯模式<br><code>i</code></li>
<li>往下插入一列，並切換到編輯模式<br><code>o</code></li>
<li>undo<br><code>u</code></li>
<li>redo<br><code>ctrl+r</code></li>
<li>跳轉到相配對的括號<br><code>%</code></li>
<li>跳到第一列<br><code>gg</code></li>
<li>跳到最後一列<br><code>G (shift+g)</code></li>
<li>跳到指令列<br><code>列號 + G (shift+g)</code></li>
<li>跳轉到局部變量的宣告處<br><code>gD</code></li>
<li>搜尋字串<br><code>/search_string</code><ul>
<li>向上搜尋<br><code>N (shift+n)</code></li>
<li>向下搜尋<br><code>n</code></li>
</ul>
</li>
<li>批次取代字串<ul>
<li>將所有 “search_from” 的字串替換成 “replace_to”<br><code>:%s/search_from/replace_to/g</code></li>
<li>忽略大小寫差異<br><code>:%s/search_from/replace_to/gi</code></li>
<li>只取代指定行數範圍的字串<br><code>:50,100s/search_from/replace_to/g</code></li>
</ul>
</li>
<li>將游標停留在欲搜尋的字串上，向下搜尋該字串<br><code>*</code></li>
<li>游標不動、往上移動內容<br><code>ctrl+e</code></li>
<li>游標不動、往下移動內容<br><code>ctrl+y</code></li>
<li>選取、複製、貼上<ul>
<li>複製一整列<br><code>ff</code></li>
<li>剪下一整列<br><code>dd</code></li>
<li>貼上<br><code>p</code></li>
<li>整列選取<br><code>V (shift+v)</code></li>
<li>區塊選取<br><code>v</code></li>
<li>方形區塊選取<br><code>ctrl+v</code></li>
<li>複製選取<br><code>y</code></li>
<li>刪除選取<br><code>d</code></li>
<li>多列刪除<ul>
<li>先 <code>V</code> 切換到整行選取模式</li>
<li>上下選擇</li>
<li>選取完後，按下 <code>d</code> 即可刪除所選</li>
</ul>
</li>
<li>區塊刪除<ul>
<li>先 <code>v</code> 或 <code>ctrl+v</code> 切換到想要的選取模式</li>
<li>上下選擇</li>
<li>選取完後，按下 <code>d</code> 即可刪除所選</li>
</ul>
</li>
<li>插入多行一樣的文字，例如要將整個function區塊，往右縮排(即插入4個空白)<ul>
<li><code>ctrl+v</code> 切換到方形區塊選取模式</li>
<li>往下選取整個function的第一行</li>
<li><code>shift+i</code>，此時游標會跳到所選區塊的第一列</li>
<li>輸入欲插入的文字 (4個空白)</li>
<li>輸入完畢後，<code>Esc</code> 結束編輯模式</li>
<li>跳出後，其餘的地方均會自動補上跟第一列相同的操作(4個空白)</li>
</ul>
</li>
</ul>
</li>
<li>開啟檔案瀏覽器<br><code>:Ex</code></li>
<li>新增水平分割視窗<br><code>:new</code></li>
<li>新增垂直分割視窗<br><code>:vnew</code></li>
<li>切換視窗<br><code>ctrl+w -&gt; 方向鍵</code></li>
<li>儲存退出<br><code>:wq</code></li>
<li>退出不儲存<br><code>:q!</code></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/4b76f376/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/4b76f376/" class="post-title-link" itemprop="url">批次更改檔案副檔名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-11 13:47:00" itemprop="dateCreated datePublished" datetime="2019-11-11T13:47:00+08:00">2019-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-22 09:20:20" itemprop="dateModified" datetime="2020-06-22T09:20:20+08:00">2020-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>範例: 把所有.JPG的副檔名，全部改成.jpg<br><code>for f in *.JPG; do mv -- &quot;$f&quot; &quot;${f%.JPG}.jpg&quot;; done</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://qcycp.github.io/posts/7504220/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nick Cheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="筆記本">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/7504220/" class="post-title-link" itemprop="url">Hexo 文章加密</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-11-11 09:43:47" itemprop="dateCreated datePublished" datetime="2019-11-11T09:43:47+08:00">2019-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-06-08 13:57:45" itemprop="dateModified" datetime="2021-06-08T13:57:45+08:00">2021-06-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md" target="_blank" rel="noopener">hexo-blog-encrypt</a> project on GitHub</p>
<h1 id="安裝套件"><a href="#安裝套件" class="headerlink" title="安裝套件"></a>安裝套件</h1><p><code>npm install hexo-blog-encrypt --save</code></p>
<h1 id="在文章的title裡加上key-word-password"><a href="#在文章的title裡加上key-word-password" class="headerlink" title="在文章的title裡加上key word: password"></a>在文章的title裡加上key word: password</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2019-11-11 11:11:11</span><br><span class="line">password: 123456</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h1 id="文章列表"><a href="#文章列表" class="headerlink" title="文章列表"></a>文章列表</h1><p><img src="/posts/7504220/image01.jpg" alt></p>
<h1 id="解鎖"><a href="#解鎖" class="headerlink" title="解鎖"></a>解鎖</h1><p><img src="/posts/7504220/image02.jpg" alt><br><img src="/posts/7504220/image03.jpg" alt></p>
<h1 id="直接隱藏文章"><a href="#直接隱藏文章" class="headerlink" title="直接隱藏文章"></a>直接隱藏文章</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2019-11-11 11:11:11</span><br><span class="line">published: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nick Cheng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">153</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nick Cheng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  




  <script src="/js/local-search.js"></script>












  

  

</body>
</html>
